---
title: "The curious incident of cbind() and c()"
author: "Guanhua Li"
date: '2017-02-01'
description: ''
tags:
- R
- Simulations
- Curiousity
categories: R
---

# R Markdown

For this first blog post, I wanted to render some R Markdown code, see how this works and catch up with all the things I always wanted to do. But curiously, by doing so I bumped into some weird stuff about cbind() and c().

So let's start this journey with something easy, like plotting the distribution of a normal distribution.

```{r rnom, include = T}
normal.sample<-rnorm(100,0,1)
```

Now that we have the sample, we can plot the histogram of the sample :

```{r hist, include = T}
hist(normal.sample,
     xlim=c(-3,3),
     breaks=100,
     probability = T)

points(seq(-3,3,by=(3-(-3))/100),
       dnorm(seq(-3,3,by=(3-(-3))/100),0,1))

qqnorm(normal.sample)

shapiro.test(normal.sample)

var(normal.sample)
mean(normal.sample)
```

It seems like 100 simulations are not enough, so why don't we try with 10000 :

```{r rnorm 10000, include = T}

normal.sample<-rnorm(10000,0,1)

hist(normal.sample,
     xlim=c(-3,3),
     breaks=100,
     probability = T)

points(seq(-3,3,by=(3-(-3))/100),
       dnorm(seq(-3,3,by=(3-(-3))/100),0,1))

v<-var(normal.sample)
v
m<-mean(normal.sample)
m
```
We see that the variance differs around `r round((v-1)*100,digits=3)`%. As for the mean, we can see that it is `r round(m,digits=3)`.

Now, here's a trick : the standard normal distribution is a symetric distribution with mean=0, so if we take n simulations and extend them with the same n simulations but by multiplying them by -1, we should see better results for the first two moments.

```{r symetric, include=T}

normal.sample<-rnorm(2500,0,1)

hist(normal.sample,
     xlim=c(-3,3),
     breaks=100,
     probability = T)

var(normal.sample)

normal.sample<-c(normal.sample,-normal.sample)

hist(normal.sample,
     xlim=c(-3,3),
     breaks=100,
     probability = T)

points(seq(-3,3,by=(3-(-3))/100),
       dnorm(seq(-3,3,by=(3-(-3))/100),0,1))

v<-var(normal.sample)
v
mean(normal.sample)
```

Well, normally the mean should be equal to 0. Let's recall how the mean is computed :

$\bar{X} = \frac{1}{N} \sum_{i=1}^N X_i$

As we took normal.sample and it's negative version (*-1), the sum shoud be 0 because $X_i=-X_{2500+i}$.

```{r digits,include=T}
normal.sample<-round(normal.sample,digits=2)

mean(normal.sample)
var(normal.sample)

```

Ok, still doesn't work :p the mean is not equal to 0, but very close!

Let's now try this 

```{r simple c,include=T}

x<-rnorm(2500,0,1)
y<- -x
sum(x+y)
sum(c(x,y))

```

Seems like the c function is making the weird things.
Now what about cbind or rbind?
```{r cbind,include=T}

sum(cbind(x,y))
sum(rbind(x,y))

```

Seems like rbind saves us from this little tiny error :).

Guanhua